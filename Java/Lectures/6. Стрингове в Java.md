# Символни низове. Динамични стрингове. Регулярни изрази.

## Символни низове в Java

- Клас `String` представлява поредица от символи (`char[]`), **референтен тип**.
- Обектите `String` са **неизменими (immutable)**.

---

## Създаване на стрингове

```java
String a = "hello"; // чрез литерал (ползва string pool)
String b = new String("hello"); // чрез конструктор (винаги създава нов обект)
```

---

## Проблем при конкатенация

```java
String str = "a";
for(int i = 0; i < 1000000; i++) {
    str = str + "a"; // всяка стъпка създава нов обект!
}
```

❗ Изключително неефективно — води до голям разход на памет.

---

## Основни методи от String класа

- `charAt(i)`, `equals()`, `equalsIgnoreCase()`, `compareTo()`
- `startsWith()`, `endsWith()`, `indexOf()`, `lastIndexOf()`
- `substring()`, `concat()`, `replace()`, `replaceAll()`
- `split()`, `toLowerCase()`, `toUpperCase()`, `trim()`

---

## Преобразуване между String и int

```java
String s = "123";
int i = Integer.parseInt(s);

int x = 42;
String str = String.valueOf(x);
```

> ⚠️ `Integer.parseInt("123a")` → грешка (`NumberFormatException`)

---

## Динамични низове – StringBuilder / StringBuffer

Използват се при чести промени на низа. Те са **изменими (mutable)**.

**Методи:** `append()`, `insert()`, `delete()`, `replace()`, `reverse()`

| Свойство          | String       | StringBuffer       | StringBuilder        |
|-------------------|--------------|---------------------|-----------------------|
| Изменимост        | ❌ immutable | ✅ mutable          | ✅ mutable            |
| Синхронизация     | -            | ✅ synchronized     | ❌ несинхронизиран    |
| Нишкова безопасност | ✅          | ✅                 | ❌                   |
| Ефективност       | ❌ бавен при чести промени | ❌ по-бавен (заради sync) | ✅ най-бърз |

---

## Регулярни изрази (Regex)

- Описват **шаблон** за текст.
- Използват се с класовете `Pattern`, `Matcher` от `java.util.regex`.

```java
Pattern pattern = Pattern.compile("регекс");
Matcher matcher = pattern.matcher("текст");
boolean match = matcher.matches();
```

---

## Основен синтаксис на Regex

- `[abc]` – един от a, b или c  
- `[^abc]` – всеки символ, освен a, b или c  
- `[a-z]` – диапазон  
- `.` – всеки символ  
- `\d` – цифра, `\D` – нецифра  
- `\w` – буква/цифра/_  
- `\s` – интервал, табулация  
- `^` – начало на низ  
- `$` – край на низ

---

## Квантори

- `*` – 0 или повече  
- `+` – 1 или повече  
- `?` – 0 или 1  
- `{n}` – точно n  
- `{n,m}` – между n и m

---

## Matcher – основни методи

- `matches()` – целият текст съвпада  
- `find()` – намира съвпадения вътре в текста  
- `lookingAt()` – проверява началото  
- `group()` – връща съвпадналата част  
- `start()` / `end()` – индекси на съвпадението

---

## Пример: Валидатор на потребителско име

```java
private static final String USERNAME_PATTERN = "^[a-z0-9_-]{3,15}$";

public boolean validateUserName(String username) {
    return Pattern.compile(USERNAME_PATTERN)
                  .matcher(username)
                  .matches();
}
```

- Позволени: малки букви, цифри, `_`, `-`
- Дължина: 3–15 символа

---

## Пример: Валидатор на имейл

```java
private static final String EMAIL_PATTERN =
    "^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@"
    + "[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$";

public boolean validateMail(String email) {
    return Pattern.compile(EMAIL_PATTERN)
                  .matcher(email)
                  .matches();
}
```

- Част преди `@`: букви, цифри, `_`, `-`, `+`, точки  
- Част след `@`: домейни и поддомейни, завършва на `.bg`, `.com` и т.н.

---
